---
title: "Vectorial"
author: "Mario"
date: "29/1/2023"
output: html_document
---
rgdal
```{r}
library(rgdal)
library(sp)
library(raster)
```
Importación  
Para importar archivos `readOGR`.  
```{r}
Spain <- readOGR("E:/SEMINARIO_BIOGEOGRAFIA/SPAIN/spain.shp")
PA <- readOGR("E:/SEMINARIO_BIOGEOGRAFIA/PNAC/PA_spain_89.shp")
```
Proyecciones
Para conocer el sistema de referencia `proj4string(Spain)`.  
```{r}
proj4string(Spain)
proj4string(PA)
```
Para modificar el sistema de referencia

WGS84 (Lat/Long): 4326
ETRS89/UTMz30N: 25830
ETRS89 = "+init=epsg:25830"
```{r}
SR_PA = ETRS89 = "+init=epsg:25830"
Spain <- spTransform(Spain, CRS(SR_PA))
```

Visualizar el objeto espacial  
```{r}
plot(Spain)
```  
Acceder a las variables  
Para acceder a las variables del objeto se utiliza `@` (`Spain@`) o la función `slotNames`.  
-data: Tabla de atributos  
-polygons: Coordenadas de todos los vértices de cada poligono  
-plotOrder: Orden en el que están los poligonos de la capa  
-bbox: Coordenadas del marco más extenso (xmin, ymin, xmax e ymax)   
-proj4string: Tipo de proyección de la capa  
```{r}
slotNames(Spain)
```
Para acceder a la tabla de atributos se utiliza `$`(`Spain@data$NAME`o directamente `Spain$NAME` )  
```{r}
Spain$NAME
```
Cuando tenemos muchos atributos 
```{r}
length(PA$DESIG_ENG)
unique(PA$DESIG_ENG)
```

Seleccionar objetos en la tabla de atributos  
```{r}
Aragon <- Spain[Spain$NAME == "Aragon",]

PNAC <- PA[PA$DESIG_ENG == "Nacional Park",]
```
Visualizar ambas capas  
```{r}
plot(Spain)
plot(Aragon, add= T, col= "red")
plot(PNAC, add=T, col = "green")
```
Cortar capas
```{r}
PNAC_Aragon <- raster::intersect(Aragon, PNAC)
plot(Aragon)
plot(PNAC_Aragon, add = T, col = "green")
```





